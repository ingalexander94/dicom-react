import{r,j as n}from"./index-CcCkGZL0.js";import{c as f,a as o,d as _}from"./cornerstoneWADOImageLoader.bundle.min-C_BQW7S1.js";const b="_dicom_wrapper_1b3lr_1",w="_dicomImage_1b3lr_1",y="_controls_1b3lr_19",m={dicom_wrapper:b,dicomImage:w,controls:y};f.external.cornerstone=o;f.external.dicomParser=_;const R=()=>{const s=r.useRef(null),[a,g]=r.useState([]),[i,l]=r.useState(0),[d,u]=r.useState(!1),c=r.useRef(null);r.useEffect(()=>{if(i&&s.current){o.enable(s.current);const e=f.wadouri.fileManager.add(a[i]);o.loadImage(e).then(t=>{o.displayImage(s.current,t)})}return()=>{o.disable(s.current)}},[i]),r.useEffect(()=>{if(d)return c.current=window.setInterval(()=>{l(e=>e<a.length?e+1:(c.current&&(clearInterval(c.current),u(!1)),e))},100),()=>{c.current&&(clearInterval(c.current),u(!1),l(0))}},[d]);const p=async e=>{var t;if((t=e.target.files)!=null&&t.length){const I=Array.from(e.target.files??[]);g(I.reverse()),l(1)}},h=e=>{const t=Number(e.target.value);l(t)},x=()=>{l(0),u(!0)};return n.jsxs("section",{className:m.dicom_wrapper,children:[n.jsx("input",{type:"file",onChange:p,accept:".dcm",multiple:!0}),n.jsx("div",{ref:s,id:m.dicomImage}),n.jsxs("div",{className:m.controls,children:[n.jsx("button",{disabled:!a.length||d,onClick:x,type:"button",children:"Play"}),n.jsx("input",{type:"range",value:i,onChange:h,name:"scroll",min:0,disabled:!a.length||d,max:a.length,step:1,id:"scroll"})]})]})};export{R as default};
